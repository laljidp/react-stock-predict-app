"use strict";(self.webpackChunkstock_prediction_app=self.webpackChunkstock_prediction_app||[]).push([[413],{822:function(e,t,r){r.r(t),r.d(t,{default:function(){return at}});var n=r(1413),a=r(4165),i=r(5861),s=r(9439),o=r(2791),c=r(6598),l=r(9276),u=r(225),d=r(890),p=r(8083),x=r(2570),g=r(3044),f=r(4891),h=r(8870),v=r(2426),m=r.n(v);function Z(e){var t,r=0;for(t=0;t<e.length;t+=1)r=e.charCodeAt(t)+((r<<5)-r);var n="#";for(t=0;t<3;t+=1){n+="00".concat((r>>8*t&255).toString(16)).slice(-2)}return n}function b(e){if(e.target&&e.percentage){var t=Number(e.target),r=Number(null===e||void 0===e?void 0:e.stockPrice),n=Number(null===e||void 0===e?void 0:e.percentage),a=r/100*n;return{afterPercentageTarget:t>r?r-a:r+a,percentage:n}}return{afterPercentageTarget:"",percentage:e.percentage}}var j=function(e){var t=Number(e.stockPrice),r=Number(e.targetPrice);return((r-t)/((t+r)/2)*100).toFixed(2)},k=function(e){var t=[];return e.target||t.push("Target field required!"),e.predictionDateTime||t.push("Please select prediction date."),e.afterPercentageTarget&&e.percentage||t.push("Please set the Stoploss field"),t},y=function(e,t,r){var a=(0,n.Z)({},e);a.challenge={userId:a.userId,userName:a.userName,predictionID:a.id},a.userId=t.id,a.userName=t.name,a.target=r;var i=b({target:r,stockPrice:null===e||void 0===e?void 0:e.stock.price.c,percentage:a.percentage}),s=i.afterPercentageTarget,o=i.percentage;return a.afterPercentageTarget=s,a.percentage=o,a},w=function(e){var t=m()(e),r=m()();return t.diff(r,"days")},C=function(e,t){return t>e?"buy":"sell"},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&0!==e.length?e.filter((function(e){var t;return(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())==="Common Stock".toLowerCase()&&!(null!==e&&void 0!==e&&e.symbol.includes("."))})):[]},P=r(184);function S(e){var t=e.users,r=void 0===t?[]:t,a=e.onSelectUser;return(0,P.jsx)(h.Z,{sx:{display:"flex",gridGap:"15px"},children:r.map((function(e){return(0,P.jsxs)(f.Z,{onClick:function(){return a(e)},direction:"row",spacing:2,sx:{display:"grid",textAlign:"left",cursor:"pointer"},children:[(0,P.jsx)(g.Z,(0,n.Z)({sx:{height:"100px",width:"100px"}},(t=e.name,{sx:{bgcolor:Z(t)},children:"".concat(t.charAt(0))}))),(0,P.jsx)(D,{children:e.name})]},e.id);var t}))})}var D=(0,u.Z)("small")({margin:"0 !important",textAlign:"center"});S.defaultProps={users:[]};var N=S,I=r(7799),L=r(1918),z=r.p+"static/media/prediction-card.19754ed3251b1da6014a.jpeg";function W(e){var t=e.daysLeft,r=void 0===t?0:t;return(0,P.jsxs)(A,{children:[(0,P.jsx)("small",{children:"Time Remaining"}),(0,P.jsxs)("div",{className:"time-section",children:[(0,P.jsx)("span",{className:"round",children:r}),(0,P.jsxs)("div",{className:"day-left-text",children:[(0,P.jsx)("span",{className:"day",children:"Day"}),(0,P.jsx)("span",{className:"left",children:"Left"})]})]})]})}var A=(0,u.Z)("div")({display:"flex",alignItems:"center",justifyContent:"flex-start",small:{color:"#fff",fontSize:"12px"},".time-section":{position:"relative"},".round":{borderRadius:"50%",padding:"8px",width:"15px",fontSize:"15px",height:"13px",background:"green",marginLeft:"10px",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"3px solid black"},".day-left-text":{display:"inline-grid",color:"#fff",fontSize:"10px",width:"25px",position:"absolute",left:"40px",zIndex:"-1",top:"5px",fontWeight:"bold",".day":{backgroundColor:"red",padding:"0 10px"},".left":{backgroundColor:"green",padding:"0 10px"}}});function E(e){var t=e.stopLoss,r=e.predictionPrice,n=e.targetPrice;e.livePrice;return(0,P.jsxs)(R,{children:[(0,P.jsx)("div",{className:"round-grey stop-loss-section",children:(0,P.jsxs)("span",{children:["$",t]})}),(0,P.jsx)(M,{}),(0,P.jsx)("div",{className:"round-grey prediction-section",children:(0,P.jsxs)("span",{children:["$",r]})}),(0,P.jsx)(M,{}),(0,P.jsx)("div",{className:"round-grey target-price-section",children:(0,P.jsxs)("span",{children:["$",n]})})]})}var R=(0,u.Z)("div")({display:"inline-flex",color:"#fff",marginTop:"10px",justifyContent:"center",alignItems:"center",width:"100%",".round-grey":{height:"40px",width:"40px",fontSize:"10px",borderRadius:"50%",backgroundColor:"#494f56",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"500"}}),M=(0,u.Z)("div")({width:"30%",height:"12px",alignContent:"center",backgroundColor:"#494f56",marginRight:"-2px",marginLeft:"-2px"}),F=r(4518),O=(0,u.Z)(F.Z)({padding:"10px 18px",backgroundColor:"rgb(34 255 34)",borderRadius:"30px",background:"radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(34,254,34,1) 54%)",color:"black",fontWeight:"bold",textTransform:"capitalize","&:disabled":{background:"#dedede"}}),$=(0,u.Z)(F.Z)({background:"#FF6A6A",borderRadius:"40px",color:"#fff",fontWeight:600,"&:hover":{backgroundColor:"#FF6A6A"}}),G=(0,u.Z)(F.Z)({borderRadius:"20px",backgroundColor:"#6aff79",textTransform:"capitalize",padding:"5px 20px",fontWeight:600,"&:disabled":{backgroundColor:"#dedede"}});function U(e){var t,r=e.prediction,n=e.isChallengeCard,a=e.onChallengeClick,i=r.target,s=r.stock,o=r.predictionDateTime,c=r.afterPercentageTarget,u=r.userName;return(0,P.jsxs)(l.Z,{children:[(0,P.jsxs)(H,{children:[(0,P.jsx)(Y,{children:(0,P.jsxs)("div",{className:"user-info",children:[(0,P.jsx)(g.Z,{sx:{marginLeft:"10px"},src:"./broken-image.jpeg"}),(0,P.jsx)("span",{className:"p-name",children:u||"Predictany007"}),(null===r||void 0===r||null===(t=r.challenge)||void 0===t?void 0:t.userName)&&(0,P.jsx)(L.Z,{sx:{marginLeft:"10px",textAlign:"right"},label:"C",color:"primary",size:"small"})]})}),(0,P.jsxs)(q,{children:[(0,P.jsxs)("div",{className:"head",children:[(0,P.jsxs)("div",{className:"head-left",children:[(0,P.jsx)(g.Z,{color:"yellow",alt:"BTC"}),(0,P.jsx)("span",{className:"stock-symbol",children:s.symbol})]}),(0,P.jsxs)("div",{className:"head-right",children:[(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)("strong",{children:"Target Price:"})," ",(0,P.jsxs)("strong",{className:"green",children:["$",i]})]}),(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)("strong",{children:"Target date:"})," ",(0,P.jsx)("strong",{className:"green",children:o})]}),(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)("strong",{children:"Stop-loss:"}),(0,P.jsxs)("strong",{className:"danger",children:["$",c]})]})]})]}),(0,P.jsx)("hr",{}),(0,P.jsx)(W,{daysLeft:w(o)}),(0,P.jsx)(E,{targetPrice:Number(i),predictionPrice:s.price.c,stopLoss:Number(c),livePrice:100})]})]}),n&&(0,P.jsx)(l.Z,{sx:{textAlign:"center",padding:"5px 0"},children:(0,P.jsx)(G,{onClick:function(){return a(r)},color:"primary",variant:"contained",children:"Challenge"})})]})}var H=(0,u.Z)("div")({backgroundColor:"grey",borderRadius:"4px",backgroundImage:"url(".concat(z,")"),objectFit:"cover",height:"220px",minWidth:"380px",backgroundSize:"cover",padding:"6px 0"}),Y=(0,u.Z)("div")({width:"70%",boxShadow:"4px -2px 2px 4px #263a47",height:"35px",background:"black",color:"#ffd230",fontWeight:"bold",padding:"5px",borderRadius:"10px",opacity:".9",".user-info":{display:"inline-flex",alignItems:"center",".p-name":{marginLeft:"10px",fontSize:"20px"}}}),q=(0,u.Z)("div")({width:"70%",padding:"10px",borderRadius:"4px",boxShadow:"4px -2px 2px 4px #263a47",height:"calc(100% - 70px)",background:"black",marginTop:"10px",opacity:".9",".head":{height:"40px",display:"inline-flex",justifyContent:"space-between",alignItems:"center",width:"100%",".head-left":{color:"#fff",display:"inline-flex",alignItems:"center",".stock-symbol":{fontSize:"25px",marginLeft:"10px"}},".head-right":{color:"#fff",fontSize:"11px",width:"50%",display:"grid",gridGap:"2px",".content":{display:"inline-flex",justifyContent:"space-between",alignContent:"center"},"strong.green":{color:"green"},"strong.danger":{color:"red"}}}});U.defaultProps={isChallengeCard:!0,onChallengeClick:function(){}};var J=r(108);function _(e){var t=e.message;return(0,P.jsx)(l.Z,{sx:{border:"1px solid #dedede",borderRadius:"10px",textAlign:"center",padding:"1rem"},children:(0,P.jsxs)(d.Z,{children:["\u24d8 ",t]})})}var B=r(295),V=r(5671),X=r(3144),Q=function(){function e(t){(0,V.Z)(this,e),this.id=t.id,this.isSharePublicaly=t.isSharePublicaly,this.percentage=t.percentage,this.predictionDateTime=t.predictionDateTime,this.afterPercentageTarget=t.afterPercentageTarget,this.selectedDurationType=t.selectedDurationType,this.stock=t.stock,this.target=t.target,this.userId=t.userId,this.userName=t.userName,this.challenge=t.challenge}return(0,X.Z)(e,[{key:"getFormattedData",value:function(){return{id:this.id,isSharePublicaly:this.isSharePublicaly,percentage:this.percentage,predictionDateTime:m()(this.predictionDateTime.toDate()).format("L"),afterPercentageTarget:parseFloat(this.afterPercentageTarget).toFixed(2),selectedDurationType:this.selectedDurationType,stock:this.stock,target:this.target,userId:this.userId,userName:this.userName,challenge:this.challenge}}}]),e}(),K={toFirestore:function(e){return(0,n.Z)((0,n.Z)({},e),{},{target:Number(e.target),afterPercentageTarget:Number(e.afterPercentageTarget),percentage:Number(e.percentage),predictionDateTime:new Date(e.predictionDateTime)})},fromFirestore:function(e,t){var r=e.data(t);return new Q(r)}},ee=function(e){return(0,I.IO)((0,I.hJ)(B.db,ne).withConverter(K),(0,I.ar)("userId","==",e),(0,I.ar)("predictionDateTime",">=",new Date(Date.now()+1e3),(0,I.Xo)("predictionDateTime","desc")))},te=function(e){return(0,I.IO)((0,I.hJ)(B.db,ne).withConverter(K),(0,I.ar)("userId","==",e),(0,I.ar)("predictionDateTime",">=",new Date(Date.now()+1e3)),(0,I.ar)("isSharePublicaly","==",!0),(0,I.Xo)("predictionDateTime","desc"))},re=function(e){return(0,I.IO)((0,I.hJ)(B.db,ne).withConverter(K),(0,I.ar)("userId","==",e),(0,I.ar)("predictionDateTime","<",new Date(Date.now()+1e3)))},ne="public_predictions",ae=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.PL)(ee(t));case 3:return r=e.sent,n=[],r.forEach((function(e){return n.push(e.data().getFormattedData())})),e.abrupt("return",{success:!0,data:n});case 9:return e.prev=9,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",{success:!1,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.ET)((0,I.hJ)(B.db,ne).withConverter(K),t);case 3:return r=e.sent,e.next=6,(0,I.r7)(r,{id:r.id});case 6:if(console.log("Prediction created ==> ",r.id),!r.id){e.next=9;break}return e.abrupt("return",{success:!0,message:"Prediction added!"});case 9:return e.abrupt("return",{success:!1,message:"Prediction failed to saved"});case 12:return e.prev=12,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",{success:!1,message:"Something went wrong!"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.PL)(te(t));case 3:return r=e.sent,n=[],r.forEach((function(e){return n.push(e.data().getFormattedData())})),e.abrupt("return",{success:!0,data:n});case 9:return e.prev=9,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",{success:!1,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.PL)(re(t));case 3:return r=e.sent,n=[],r.forEach((function(e){return n.push(e.data().getFormattedData())})),e.abrupt("return",{success:!0,data:n});case 9:return e.prev=9,e.t0=e.catch(0),console.log("Error while fetching completed predictins",e.t0),e.abrupt("return",{success:!1,message:"Reuest failed to for complete preidiction data"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();function ce(e){var t=e.userID,r=e.isChallengesList,n=e.onChallengeClick,c=(0,o.useState)([]),l=(0,s.Z)(c,2),u=l[0],d=l[1],p=(0,o.useState)(!1),x=(0,s.Z)(p,2),g=x[0],f=x[1],h=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,ae(t);case 3:r=e.sent,d(r.data),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,se(t);case 3:r=e.sent,d(r.data),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e;return r?(v(),e=(0,I.cf)(te(t),(function(e){var t=[];e.forEach((function(e){return t.push(e.data().getFormattedData())})),d(t)}))):(h(),e=(0,I.cf)(ee(t),(function(e){var t=[];e.forEach((function(e){return t.push(e.data().getFormattedData())})),d(t)}))),function(){e&&e()}}),[]),g?(0,P.jsx)(J.Z,{}):(0,P.jsx)(le,{children:(0,P.jsxs)(ue,{children:[u.map((function(e){return(0,P.jsx)(U,{onChallengeClick:n,prediction:e,isChallengeCard:r},e.id)})),!g&&0===u.length&&(0,P.jsx)(_,{message:"No ongoing prediction found"})]})})}ce.defaultProps={isChallengesList:!1,onChallengeClick:function(){}};var le=(0,u.Z)("div")({padding:"5px",width:"100%"}),ue=(0,u.Z)("div")({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"nowrap",overflowX:"auto",overflowY:"hidden",gridGap:"18px","::-webkit-scrollbar":{height:"10px",margin:"5px"},"::-webkit-scrollbar-track":{boxShadow:"inset 0 0 1px rgba(0, 0, 0, 0.3)"},"::-webkit-scrollbar-thumb":{background:"#464d58",borderRadius:"10px"}}),de=r(5987),pe=r(4942),xe=r(5289),ge=r(9157),fe=r(7636),he=r(1652),ve=r(8106),me=r(5661),Ze=r(5699),be=r(5931),je=r(1026),ke=r(1440),ye=r(2199);function we(e){var t=e.handleChange,r=e.value,n=e.tabs,a=e.sx,i=(0,o.useState)(null),c=(0,s.Z)(i,2),l=c[0],u=c[1];return(0,o.useEffect)((function(){u(r)}),[r]),(0,P.jsx)(Ce,{sx:a,color:"primary",size:"small","aria-label":"small button group",children:n.map((function(e){return(0,P.jsx)(F.Z,{color:"secondary",variant:"outlined",onClick:function(){return function(e){u(e),t(e)}(e.value)},className:l===e.value?"selected":"",children:e.label},e.value)}))})}var Ce=(0,u.Z)(ye.Z)({backgroundColor:"#fff",borderColor:"black",button:{color:"black",border:"1px solid #857b7b !important",padding:"3px 20px",fontWeight:"bold",textTransform:"capitalize"},"button.selected":{backgroundColor:"rgb(0 255 0)"}});we.defaultProps={tabs:[],sx:{}};var Te=we,Pe="cfl07hhr01qj7ds2rp70cfl07hhr01qj7ds2rp7g",Se="https://finnhub.io/api/v1",De=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n,i,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()){e.next=2;break}return e.abrupt("return",[]);case 2:return r="".concat(Se,"/search?q=").concat(t,"&token=").concat(Pe),e.next=5,fetch(r);case 5:return n=e.sent,e.next=8,n.json();case 8:return i=e.sent,s=i.result,o=i.count,e.abrupt("return",{count:o,result:T(s)});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{});case 2:return r="".concat(Se,"/quote?symbol=").concat(t.symbol,"&token=").concat(Pe),e.next=5,fetch(r);case 5:return n=e.sent,e.next=8,n.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=r(8719),Le=["size"],ze=o.forwardRef((function(e,t){return(0,P.jsx)(be.Z,(0,n.Z)({direction:"down",ref:t},e))})),We={stock:{price:null},isSharePublicaly:!0,selectedDurationType:"week",target:"",percentage:"10",predictionDateTime:"",afterPercentageTarget:""},Ae={day:5,week:10,month:15};var Ee=(0,u.Z)(me.Z)({padding:"10px",fontWeight:"bold",fontSize:"28px",color:"#ffcd29",textAlign:"center",backgroundColor:"#273c58",marginTop:"20px"}),Re=(0,u.Z)(ke.Z)((function(){return{"& .MuiSwitch-switchBase.Mui-checked":{color:"#fff"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"rgb(34 255 34)"}}})),Me=function(e){var t,r,c,u,x,g,f=e.open,h=e.onClose,v=(0,o.useState)([]),m=(0,s.Z)(v,2),Z=m[0],y=m[1],w=(0,o.useState)(!1),C=(0,s.Z)(w,2),T=C[0],S=C[1],D=(0,o.useState)(!1),N=(0,s.Z)(D,2),I=N[0],L=N[1],z=(0,o.useState)(We),W=(0,s.Z)(z,2),A=W[0],E=W[1],R=(0,Ie.D)(),M=R.showError,F=R.showSuccessMsg,$=(0,o.useContext)(p.Vo).userData,G=$.name,U=$.uid,H=function(){h(),E(We)},Y=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===t||void 0===t||null===(r=t.trim())||void 0===r?void 0:r.length)>=2)){e.next=7;break}return S(!0),e.next=4,De(t);case 4:n=e.sent,y((null===n||void 0===n?void 0:n.result)||[]),S(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t);case 2:r=e.sent,E((0,n.Z)((0,n.Z)({},A),{},{stock:(0,n.Z)((0,n.Z)({},A.stock),{},{price:r})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(0,o.useCallback)(function(e){var t;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=this;t&&clearTimeout(t),t=setTimeout((function(){t=null,e.apply(i,n)}),500)}}(Y),[]),B=function(e,t){E((0,n.Z)((0,n.Z)({},A),{},(0,pe.Z)({},e,t)))},V=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,i,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("payload",A),!((t=k(A)).length>0)){e.next=7;break}console.log("erros",t),t.forEach((function(e){M(e)})),e.next=16;break;case 7:return L(!0),r=(0,n.Z)((0,n.Z)({},A),{},{userName:G,userId:U}),e.next=11,ie(r);case 11:i=e.sent,s=i.success,o=i.message,s?(F(o),H()):M(o),L(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e;null!==A&&void 0!==A&&null!==(e=A.stock)&&void 0!==e&&e.symbol&&q(A.stock)}),[null===A||void 0===A||null===(t=A.stock)||void 0===t?void 0:t.symbol]),(0,o.useEffect)((function(){var e,t,r=b({stockPrice:null===A||void 0===A||null===(e=A.stock)||void 0===e||null===(t=e.price)||void 0===t?void 0:t.c,percentage:A.percentage,target:A.target}),a=r.afterPercentageTarget,i=r.percentage;E((0,n.Z)((0,n.Z)({},A),{},{afterPercentageTarget:a,percentage:i}))}),[null===A||void 0===A?void 0:A.target]),(0,P.jsxs)(xe.Z,{open:f,TransitionComponent:ze,maxWidth:"sm",fullWidth:!0,sx:{".MuiDialog-scrollPaper":{justifyContent:"center",alignItems:"flex-start"},".MuiPaper-root":{minHeight:"50%"}},onClose:H,"aria-describedby":"alert-dialog-slide-description",children:[(0,P.jsx)(Ee,{children:"Create A Prediction"}),(0,P.jsxs)(ge.Z,{sx:{textAlign:"center",marginTop:"25px",paddingTop:"15px !important"},children:[(0,P.jsx)(Ze.Z,{placeholder:"Search by stock symbol e.g. AAPL",loading:T,size:"small",noOptionsText:"No stock founds!",sx:{margin:"0 auto",width:"80%"},onInputChange:function(e){var t=e.target;return _(t.value)},options:Z,loadingText:(0,P.jsx)(J.Z,{}),onChange:function(e,t){var r;E((r=t)?(0,n.Z)((0,n.Z)({},A),{},{stock:(0,n.Z)((0,n.Z)({},A.stock),r)}):We)},getOptionLabel:function(e){return"".concat(e.description," (").concat(e.symbol,")")},renderInput:function(e){return(0,P.jsx)(je.Z,(0,n.Z)((0,n.Z)({},e),{},{label:"Search by stock symbol e.g. AAPL",placeholder:"Search Stock"}))}}),!(null!==A&&void 0!==A&&null!==(r=A.stock)&&void 0!==r&&r.price)&&(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)("span",{children:"\u24d8 Please search & select a stock for prediction."})}),(null===A||void 0===A||null===(c=A.stock)||void 0===c?void 0:c.price)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Te,{sx:{marginTop:"18px"},handleChange:function(e){return function(e,t){var r,a=Ae[t],i=b({stockPrice:A.stock.price.c,percentage:a,target:A.target}).afterPercentageTarget;E((0,n.Z)((0,n.Z)({},A),{},(r={},(0,pe.Z)(r,e,t),(0,pe.Z)(r,"percentage",a),(0,pe.Z)(r,"afterPercentageTarget",i),r)))}("selectedDurationType",e)},value:A.selectedDurationType,tabs:[{label:"Daily",value:"day"},{label:"Weekly",value:"week"},{label:"Monthly",value:"month"}]}),(0,P.jsx)(d.Z,{sx:{marginTop:"18px"},children:(0,P.jsxs)("strong",{children:[null===A||void 0===A||null===(u=A.stock)||void 0===u?void 0:u.symbol," @ $",null===A||void 0===A||null===(x=A.stock)||void 0===x||null===(g=x.price)||void 0===g?void 0:g.c," will reach a target of"]})}),(0,P.jsxs)(l.Z,{sx:{width:"70%",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"18px auto"},children:[(0,P.jsx)(je.Z,{sx:{maxWidth:"180px"},size:"small",id:"outlined-basic",label:"Target price",variant:"outlined",name:"target",type:"number",onChange:function(e){var t=e.target;return B(t.name,t.value)},value:null===A||void 0===A?void 0:A.target}),(0,P.jsx)(d.Z,{sx:{margin:"0 2rem"},children:"By"}),(0,P.jsx)(he._,{dateAdapter:ve.Q,children:(0,P.jsx)(fe.$,{inputFormat:"MM/DD/YYYY",value:null===A||void 0===A?void 0:A.predictionDateTime,disablePast:!0,size:"sm",sx:{".MuiInputBase-root":{height:"40px",width:"180px",input:{letterSpacing:"normal"}}},onChange:function(e){return B("predictionDateTime",e)},renderInput:function(e){e.size;var t=(0,de.Z)(e,Le);return(0,P.jsx)(je.Z,(0,n.Z)((0,n.Z)({},t),{},{size:"small"}))}})})]}),(0,P.jsx)(d.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)("strong",{children:"It has a stop-loss at"})}),(0,P.jsxs)(l.Z,{sx:{width:"70%",display:"flex",justifyContent:"space-evenly",alignItems:"center",margin:"18px auto"},children:[(0,P.jsx)(je.Z,{sx:{maxWidth:"120px"},size:"small",id:"outlined-basic",label:"Stop loss %",name:"percentage",type:"number",onChange:function(e){var t=e.target;return function(e,t){if(t){var r=b({stockPrice:A.stock.price.c,target:A.target,percentage:t}),a=r.afterPercentageTarget,i=r.percentage;E((0,n.Z)((0,n.Z)({},A),{},{afterPercentageTarget:a,percentage:i}))}else{var s;E((0,n.Z)((0,n.Z)({},A),{},(s={},(0,pe.Z)(s,e,t),(0,pe.Z)(s,"afterPercentageTarget",""),s)))}}(t.name,t.value)},value:A.percentage,variant:"outlined"}),(0,P.jsx)(je.Z,{sx:{maxWidth:"120px"},size:"small",id:"outlined-basic",name:"afterPercentageTarget",onChange:function(e){var t=e.target;return function(e,t){if(t&&Number(t)>0){var r=j({stockPrice:A.stock.price.c,targetPrice:t});E((0,n.Z)((0,n.Z)({},A),{},{afterPercentageTarget:t,percentage:r}))}else E((0,n.Z)((0,n.Z)({},A),{},{afterPercentageTarget:t,percentage:""}))}(t.name,t.value)},value:null===A||void 0===A?void 0:A.afterPercentageTarget,label:"Stop loss $",type:"number",variant:"outlined"})]}),(0,P.jsx)(l.Z,{sx:{marginTop:"24px"},children:(0,P.jsx)(O,{onClick:V,disabled:I,children:I?"Submitting...":"Predict now"})}),(0,P.jsxs)(l.Z,{sx:{fontWeight:500,padding:"10px",textAlign:"right",fontSize:"14px"},children:["Allowed for public challenge",(0,P.jsx)(Re,{name:"isSharePublicaly",checked:A.isSharePublicaly,onChange:function(e){var t=e.target;return B(t.name,t.checked)}})]})]})]})]})},Fe=r(4721),Oe=r(5643),$e=r(7);var Ge=(0,u.Z)(l.Z)({padding:"10px",display:"flex",alignItems:"center",justifyContent:"flex-start",fontWeight:500,".card-content":{display:"block",lineHeight:1,marginLeft:"15px"}}),Ue=function(e){var t=e.userID,r=(0,o.useState)([]),n=(0,s.Z)(r,2),c=n[0],u=n[1],p=(0,o.useState)(!1),x=(0,s.Z)(p,2),f=x[0],h=x[1],v=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,oe(t);case 3:(r=e.sent).success&&u(r.data),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){v()}),[t]),f?(0,P.jsx)(J.Z,{}):(0,P.jsxs)(l.Z,{children:[c.map((function(e){var t=e.stock,r=e.target,n=e.id;return(0,P.jsxs)(o.Fragment,{children:[(0,P.jsxs)(Ge,{children:[(0,P.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"30%",".danger":{color:Oe.Z[400]},".green":{color:$e.Z[400]}},children:[(0,P.jsx)(l.Z,{children:(0,P.jsx)(g.Z,{sx:{bgcolor:Oe.Z[400]},alt:t.symbol,variant:"rounded",src:"broken-iamge.jpeg"})}),(0,P.jsxs)(l.Z,{className:"card-content",children:[(0,P.jsxs)(d.Z,{children:[t.description," (",t.symbol,")"]}),(0,P.jsxs)(d.Z,{variant:"small",children:["buy from $",t.price.c," to $",r]})]})]}),(0,P.jsx)(d.Z,{variant:"h6",className:"danger",children:"50%"})]}),(0,P.jsx)(Fe.Z,{sx:{width:"35%"}})]},n)})),!f&&0===c.length&&(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(_,{message:"No completed predictions found!"})})]})},He=r(4395),Ye=r(4663),qe=r(3400),Je=r(9823),_e=r(2460),Be=o.forwardRef((function(e,t){return(0,P.jsx)(be.Z,(0,n.Z)({direction:"up",ref:t},e))}));function Ve(e){var t,r,n,c,u=e.open,x=e.onClose,f=e.prediction,h=void 0===f?{}:f,v=(0,o.useState)(""),Z=(0,s.Z)(v,2),b=Z[0],j=Z[1],k=(0,o.useState)(!1),w=(0,s.Z)(k,2),T=w[0],S=w[1],D=(0,Ie.D)(),N=D.showError,I=D.showSuccessMsg,L=o.useContext(p.Vo).userData,z=function(){j(""),x()},W=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,n,i,s,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Number(null===h||void 0===h?void 0:h.stock.price.c),r=(null===h||void 0===h?void 0:h.target)>t,n=Number(b)){e.next=6;break}return N("Target price is required!"),e.abrupt("return");case 6:if(!(r&&n>t)){e.next=10;break}N("Invalid prediction, Target Price should be Less than $".concat(t)),e.next=23;break;case 10:if(r||!(n<t)){e.next=14;break}N("Invalid prediction, Target Price should be Greter than $".concat(t)),e.next=23;break;case 14:return S(!0),i=y(h,L,b),e.next=18,ie(i);case 18:s=e.sent,o=s.success,c=s.message,o?(I("Challenge prediction saved."),z()):console.log("ErrorMessage",c),S(!1);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=C(null===h||void 0===h||null===(t=h.stock)||void 0===t||null===(r=t.price)||void 0===r?void 0:r.c,null===h||void 0===h?void 0:h.target);return(0,P.jsx)("div",{children:(0,P.jsx)(xe.Z,{open:u,TransitionComponent:Be,keepMounted:!0,onClose:z,"aria-describedby":"alert-dialog-slide-description",sx:{".MuiDialog-scrollPaper":{justifyContent:"center",alignItems:"flex-start",zIndex:2},".MuiPaper-root":{minHeight:"50%",width:"450px"},".MuiDialogContent-root":{padding:"0"}},children:(0,P.jsxs)(ge.Z,{children:[(0,P.jsx)(Xe,{children:(0,P.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,P.jsx)(l.Z,{sx:{position:"absolute",left:"70px"},children:(0,P.jsx)(g.Z,{src:"borken-image.jpeg",alt:(null===h||void 0===h?void 0:h.userName)||"N/A",sx:{height:"70px",width:"70px"}})}),(0,P.jsx)(d.Z,{sx:{color:"yellow",fontSize:"22px",fontWeight:600,marginTop:"2rem"},children:(null===h||void 0===h?void 0:h.userName)||"Predictany007"}),(0,P.jsx)(d.Z,{sx:{letterSpacing:7,color:"#fff",fontWeight:600,marginTop:"12px"},children:"Predicts"}),(0,P.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,P.jsx)(d.Z,{sx:{color:"buy"===A?$e.Z[400]:_e.Z[400],fontSize:"36px",textShadow:"0 -1px 8px ".concat("buy"===A?$e.Z[300]:_e.Z[300]),textTransform:"uppercase"},children:(0,P.jsx)("b",{className:A,children:A})}),(0,P.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,P.jsx)(g.Z,{variant:"rounded",src:"broken-image.jpeg",alt:"TSLA",sx:{width:"35px",height:"35px",bgcolor:Oe.Z[400],marginLeft:"10px"}}),(0,P.jsxs)(d.Z,{color:"#fff",sx:{display:"grid",lineHeight:1,marginLeft:"10px",small:{fontSize:"10px"}},children:[(0,P.jsx)(d.Z,{variant:"subtitle1",children:null===h||void 0===h||null===(n=h.stock)||void 0===n?void 0:n.symbol}),(0,P.jsx)("small",{children:null===h||void 0===h||null===(c=h.stock)||void 0===c?void 0:c.description})]})]})]}),(0,P.jsxs)(d.Z,{sx:{color:"rgb(218 218 218)",fontSize:"14px"},children:["Predicted: ",m()(null===h||void 0===h?void 0:h.predictionDateTime).format("LL")]}),(0,P.jsxs)(Ke,{children:[(0,P.jsx)("span",{children:"Target Price: "}),(0,P.jsxs)("span",{children:["$ ",null===h||void 0===h?void 0:h.target]})]}),(0,P.jsxs)(Ke,{children:[(0,P.jsx)("span",{children:"Target Date: "}),(0,P.jsx)("span",{children:null===h||void 0===h?void 0:h.predictionDateTime})]})]})}),(0,P.jsxs)(Qe,{children:[(0,P.jsx)(d.Z,{variant:"subtitle2",children:"To challenge, you must predict the opposite of the above user`s prediction"}),(0,P.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,P.jsx)(d.Z,{variant:"subtitle1",children:(0,P.jsx)("strong",{children:"Tesla will reach a target of:"})}),(0,P.jsx)(je.Z,{sx:{maxWidth:"120px",marginLeft:"18px"},placeholder:"Price $",name:"targetPrice",size:"small",type:"number",value:b,onChange:function(e){var t=e.target;return j(t.value)}})]}),(0,P.jsx)(l.Z,{sx:{textAlign:"center",marginTop:"18px"},children:(0,P.jsx)(O,{disabled:T,onClick:W,children:T?"Submitting...":"Issue challenge"})})]})]})})})}var Xe=(0,u.Z)(l.Z)({padding:"1rem",position:"relative",background:"radial-gradient(circle, rgba(65,70,65,1) 1%, rgba(0,0,0,0.9780505952380952) 53%)"}),Qe=(0,u.Z)(l.Z)({backgroundColor:"#f6fafc",padding:"1rem",textAlign:"center",background:"linear-gradient(50deg, rgba(206,230,243,1) 0%,rgba(255,255,255,1) 41%, rgba(206,230,243,1) 68%)"}),Ke=(0,u.Z)(l.Z)({color:"#fff",fontSize:"14px",fontWeight:500,display:"flex",justifyContent:"space-between",width:"170px",margin:"0 auto",lineHeight:2});Ve.defaultProps={prediction:null};var et=o.forwardRef((function(e,t){return(0,P.jsx)(be.Z,(0,n.Z)({direction:"up",ref:t},e))}));function tt(e){var t=e.open,r=e.onClose,n=e.userID,a=e.userName,i=(0,o.useState)({open:!1,prediction:null}),c=(0,s.Z)(i,2),u=c[0],p=c[1];console.log("userUID",n);var x=function(){r()};return(0,P.jsx)("div",{children:(0,P.jsxs)(xe.Z,{fullScreen:!0,open:t,onClose:x,TransitionComponent:et,children:[(0,P.jsx)(He.Z,{sx:{position:"relative"},color:"default",children:(0,P.jsxs)(Ye.Z,{children:[(0,P.jsx)(qe.Z,{edge:"start",color:"inherit",onClick:x,"aria-label":"close",children:(0,P.jsx)(Je.Z,{})}),(0,P.jsxs)(d.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:[a,"`s Predictions"]})]})}),(0,P.jsxs)(l.Z,{sx:{padding:"10px"},children:[(0,P.jsx)(d.Z,{variant:"subtitle2",sx:{marginTop:"18px",fontWeight:600},children:"ONGOING PREDICTION"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(ce,{userID:n,isChallengesList:!0,onChallengeClick:function(e){p({open:!0,prediction:e})}})}),(0,P.jsx)(d.Z,{variant:"subtitle2",sx:{marginTop:"18px",fontWeight:600},children:"COMPLETED PREDICTIONS"}),(0,P.jsx)(Ue,{userID:n})]}),(0,P.jsx)(Ve,{open:u.open,prediction:u.prediction,onClose:function(){p({open:!1,prediction:null})}})]})})}var rt=(0,u.Z)("div")({display:"flex",alignItems:"flex-end",justifyContent:"space-between",width:"100%",margin:"20px 0",".heading-text":{fontWeight:"bold",fontSize:"28px"}}),nt=function(){var e=(0,o.useContext)(p.Vo).userData,t=e.uid,r=e.name,u=(0,o.useState)([]),g=(0,s.Z)(u,2),f=g[0],h=g[1],v=(0,o.useState)(!1),m=(0,s.Z)(v,2),Z=m[0],b=m[1],j=(0,o.useState)(!1),k=(0,s.Z)(j,2),y=k[0],w=k[1],C=(0,o.useState)({open:!1,userID:"",userName:""}),T=(0,s.Z)(C,2),S=T[0],D=T[1],I=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("calling APIs"),b(!0),e.next=4,(0,x.Cv)(t);case 4:r=e.sent,h(r),b(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){return w(!y)};return(0,o.useEffect)((function(){I()}),[]),(0,P.jsxs)(c.Z,{maxWidth:"xl",children:[(0,P.jsxs)(rt,{children:[(0,P.jsxs)(d.Z,{className:"heading-text",children:["Hello, ",r]}),(0,P.jsx)(l.Z,{children:(0,P.jsx)($,{onClick:L,children:"Predict Now"})})]}),(0,P.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600,paddingTop:"18px"},children:"OTHER USERS"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:Z?(0,P.jsx)(J.Z,{}):(0,P.jsx)(N,{users:f,onSelectUser:function(e){D({open:!0,userID:e.id,userName:e.name})}})}),(0,P.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600,paddingTop:"18px"},children:"YOUR ONGOING PREDICTION"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(ce,{userID:t})}),(0,P.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600,paddingTop:"18px"},children:"YOUR COMPLETED PREDICTIONS"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(Ue,{userID:t})}),(0,P.jsx)(Me,{open:y,onClose:L}),(0,P.jsx)(tt,(0,n.Z)({onClose:function(){return D({open:!1,userID:"",userName:""})}},S))]})},at=nt},2570:function(e,t,r){r.d(t,{Cv:function(){return c},jd:function(){return l}});var n=r(4165),a=r(5861),i=r(7799),s=r(295),o="Users",c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,i.IO)((0,i.hJ)(s.db,o),(0,i.ar)("id","!=",t)),e.next=4,(0,i.PL)(r);case 4:return a=e.sent,c=[],a.forEach((function(e){return c.push(e.data())})),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,i.JU)(s.db,o,t),e.next=4,(0,i.QT)(r);case 4:return a=e.sent,e.abrupt("return",{success:!0,data:a.data()});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{success:!1,message:"No user found!"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=413.dccda187.chunk.js.map