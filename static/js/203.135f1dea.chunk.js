"use strict";(self.webpackChunkstock_prediction_app=self.webpackChunkstock_prediction_app||[]).push([[203],{2859:function(e,t,r){r.r(t),r.d(t,{default:function(){return it}});var n=r(1413),a=r(4165),i=r(5861),s=r(9439),o=r(2791),c=r(6598),l=r(9276),u=r(225),d=r(890),p=r(8083),x=r(2570),g=r(3044),f=r(4891),h=r(8870),m=r(2426),v=r.n(m);function Z(e){var t,r=0;for(t=0;t<e.length;t+=1)r=e.charCodeAt(t)+((r<<5)-r);var n="#";for(t=0;t<3;t+=1){n+="00".concat((r>>8*t&255).toString(16)).slice(-2)}return n}function b(e){if(e.target&&e.percentage){var t=Number(e.target),r=Number(null===e||void 0===e?void 0:e.stockPrice),n=Number(null===e||void 0===e?void 0:e.percentage),a=r/100*n;return{afterPercentageTarget:t>r?r-a:r+a,percentage:n}}return{afterPercentageTarget:"",percentage:e.percentage}}var j=function(e){var t=Number(e.stockPrice),r=Number(e.targetPrice);return((r-t)/((t+r)/2)*100).toFixed(2)},k=function(e){var t=[];return e.target||t.push("Target field required!"),e.predictionDateTime||t.push("Please select prediction date."),e.afterPercentageTarget&&e.percentage||t.push("Please set the Stoploss field"),t},y=function(e){var t;return(0,n.Z)((0,n.Z)({},e),{},{target:Number(e.target),afterPercentageTarget:Number(e.afterPercentageTarget),percentage:Number(e.percentage),predictionDateTime:null===e||void 0===e||null===(t=e.predictionDateTime)||void 0===t?void 0:t.toDate()})},w=function(e,t,r){var a=(0,n.Z)({},e);a.challenge={userId:a.userId,userName:a.userName,predictionID:a.id},a.userId=t.id,a.userName=t.name,a.target=r;var i=b({target:r,stockPrice:null===e||void 0===e?void 0:e.stock.price.c,percentage:a.percentage}),s=i.afterPercentageTarget,o=i.percentage;return a.afterPercentageTarget=s,a.percentage=o,a},C=function(e){var t=v()(e),r=v()();return t.diff(r,"days")},T=function(e,t){return t>e?"buy":"sell"},P=r(184);function D(e){var t=e.users,r=void 0===t?[]:t,a=e.onSelectUser;return(0,P.jsx)(h.Z,{sx:{display:"flex",gridGap:"15px"},children:r.map((function(e){return(0,P.jsxs)(f.Z,{onClick:function(){return a(e)},direction:"row",spacing:2,sx:{display:"grid",textAlign:"left",cursor:"pointer"},children:[(0,P.jsx)(g.Z,(0,n.Z)({sx:{height:"100px",width:"100px"}},(t=e.name,{sx:{bgcolor:Z(t)},children:"".concat(t.charAt(0))}))),(0,P.jsx)(N,{children:e.name})]},e.id);var t}))})}var N=(0,u.Z)("small")({margin:"0 !important",textAlign:"center"});D.defaultProps={users:[]};var S=D,I=r(7799),z=r(1918),L=r.p+"static/media/prediction-card.19754ed3251b1da6014a.jpeg";function W(e){var t=e.daysLeft,r=void 0===t?0:t;return(0,P.jsxs)(A,{children:[(0,P.jsx)("small",{children:"Time Remaining"}),(0,P.jsxs)("div",{className:"time-section",children:[(0,P.jsx)("span",{className:"round",children:r}),(0,P.jsxs)("div",{className:"day-left-text",children:[(0,P.jsx)("span",{className:"day",children:"Day"}),(0,P.jsx)("span",{className:"left",children:"Left"})]})]})]})}var A=(0,u.Z)("div")({display:"flex",alignItems:"center",justifyContent:"flex-start",small:{color:"#fff",fontSize:"12px"},".time-section":{position:"relative"},".round":{borderRadius:"50%",padding:"8px",width:"15px",fontSize:"15px",height:"13px",background:"green",marginLeft:"10px",color:"#fff",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"3px solid black"},".day-left-text":{display:"inline-grid",color:"#fff",fontSize:"10px",width:"25px",position:"absolute",left:"40px",zIndex:"-1",top:"5px",fontWeight:"bold",".day":{backgroundColor:"red",padding:"0 10px"},".left":{backgroundColor:"green",padding:"0 10px"}}});function E(e){var t=e.stopLoss,r=e.predictionPrice,n=e.targetPrice;e.livePrice;return(0,P.jsxs)(R,{children:[(0,P.jsx)("div",{className:"round-grey stop-loss-section",children:(0,P.jsxs)("span",{children:["$",t]})}),(0,P.jsx)(M,{}),(0,P.jsx)("div",{className:"round-grey prediction-section",children:(0,P.jsxs)("span",{children:["$",r]})}),(0,P.jsx)(M,{}),(0,P.jsx)("div",{className:"round-grey target-price-section",children:(0,P.jsxs)("span",{children:["$",n]})})]})}var R=(0,u.Z)("div")({display:"inline-flex",color:"#fff",marginTop:"10px",justifyContent:"center",alignItems:"center",width:"100%",".round-grey":{height:"40px",width:"40px",fontSize:"10px",borderRadius:"50%",backgroundColor:"#494f56",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"500"}}),M=(0,u.Z)("div")({width:"30%",height:"12px",alignContent:"center",backgroundColor:"#494f56",marginRight:"-2px",marginLeft:"-2px"}),F=r(4518),O=(0,u.Z)(F.Z)({padding:"10px 18px",backgroundColor:"rgb(34 255 34)",borderRadius:"30px",background:"radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(34,254,34,1) 54%)",color:"black",fontWeight:"bold",textTransform:"capitalize","&:disabled":{background:"#dedede"}}),$=(0,u.Z)(F.Z)({background:"#FF6A6A",borderRadius:"40px",color:"#fff",fontWeight:600,"&:hover":{backgroundColor:"#FF6A6A"}}),G=(0,u.Z)(F.Z)({borderRadius:"20px",backgroundColor:"#6aff79",textTransform:"capitalize",padding:"5px 20px",fontWeight:600,"&:disabled":{backgroundColor:"#dedede"}});function U(e){var t,r=e.prediction,n=e.isChallengeCard,a=e.onChallengeClick,i=r.target,s=r.stock,o=r.predictionDateTime,c=r.afterPercentageTarget,u=r.userName;return(0,P.jsxs)(l.Z,{children:[(0,P.jsxs)(H,{children:[(0,P.jsx)(Y,{children:(0,P.jsxs)("div",{className:"user-info",children:[(0,P.jsx)(g.Z,{sx:{marginLeft:"10px"},src:"./broken-image.jpeg"}),(0,P.jsx)("span",{className:"p-name",children:u||"Predictany007"}),(null===r||void 0===r||null===(t=r.challenge)||void 0===t?void 0:t.userName)&&(0,P.jsx)(z.Z,{sx:{marginLeft:"10px",textAlign:"right"},label:"C",color:"primary",size:"small"})]})}),(0,P.jsxs)(J,{children:[(0,P.jsxs)("div",{className:"head",children:[(0,P.jsxs)("div",{className:"head-left",children:[(0,P.jsx)(g.Z,{color:"yellow",alt:"BTC"}),(0,P.jsx)("span",{className:"stock-symbol",children:s.symbol})]}),(0,P.jsxs)("div",{className:"head-right",children:[(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)("strong",{children:"Target Price:"})," ",(0,P.jsxs)("strong",{className:"green",children:["$",i]})]}),(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)("strong",{children:"Target date:"})," ",(0,P.jsx)("strong",{className:"green",children:o})]}),(0,P.jsxs)("div",{className:"content",children:[(0,P.jsx)("strong",{children:"Stop-loss:"}),(0,P.jsxs)("strong",{className:"danger",children:["$",c]})]})]})]}),(0,P.jsx)("hr",{}),(0,P.jsx)(W,{daysLeft:C(o)}),(0,P.jsx)(E,{targetPrice:Number(i),predictionPrice:s.price.c,stopLoss:Number(c),livePrice:100})]})]}),n&&(0,P.jsx)(l.Z,{sx:{textAlign:"center",padding:"5px 0"},children:(0,P.jsx)(G,{onClick:function(){return a(r)},color:"primary",variant:"contained",children:"Challenge"})})]})}var H=(0,u.Z)("div")({backgroundColor:"grey",borderRadius:"4px",backgroundImage:"url(".concat(L,")"),objectFit:"cover",height:"220px",minWidth:"380px",backgroundSize:"cover",padding:"6px 0"}),Y=(0,u.Z)("div")({width:"70%",boxShadow:"4px -2px 2px 4px #263a47",height:"35px",background:"black",color:"#ffd230",fontWeight:"bold",padding:"5px",borderRadius:"10px",opacity:".9",".user-info":{display:"inline-flex",alignItems:"center",".p-name":{marginLeft:"10px",fontSize:"20px"}}}),J=(0,u.Z)("div")({width:"70%",padding:"10px",borderRadius:"4px",boxShadow:"4px -2px 2px 4px #263a47",height:"calc(100% - 70px)",background:"black",marginTop:"10px",opacity:".9",".head":{height:"40px",display:"inline-flex",justifyContent:"space-between",alignItems:"center",width:"100%",".head-left":{color:"#fff",display:"inline-flex",alignItems:"center",".stock-symbol":{fontSize:"25px",marginLeft:"10px"}},".head-right":{color:"#fff",fontSize:"11px",width:"50%",display:"grid",gridGap:"2px",".content":{display:"inline-flex",justifyContent:"space-between",alignContent:"center"},"strong.green":{color:"green"},"strong.danger":{color:"red"}}}});U.defaultProps={isChallengeCard:!0,onChallengeClick:function(){}};var _=r(3239);function q(e){var t=e.color;return(0,P.jsxs)(l.Z,{sx:{textAlign:"center",margin:"3rem 0"},children:[(0,P.jsx)(_.Z,{color:t}),";"]})}function B(e){var t=e.message;return(0,P.jsx)(l.Z,{sx:{border:"1px solid #dedede",borderRadius:"10px",textAlign:"center",padding:"1rem"},children:(0,P.jsxs)(d.Z,{children:["\u24d8 ",t]})})}q.defaultProps={color:"secondary"};var V=r(295),X=r(5671),Q=r(3144),K=function(){function e(t){(0,X.Z)(this,e),this.id=t.id,this.isSharePublicaly=t.isSharePublicaly,this.percentage=t.percentage,this.predictionDateTime=t.predictionDateTime,this.afterPercentageTarget=t.afterPercentageTarget,this.selectedDurationType=t.selectedDurationType,this.stock=t.stock,this.target=t.target,this.userId=t.userId,this.userName=t.userName,this.challenge=t.challenge}return(0,Q.Z)(e,[{key:"getFormattedData",value:function(){return{id:this.id,isSharePublicaly:this.isSharePublicaly,percentage:this.percentage,predictionDateTime:v()(this.predictionDateTime.toDate()).format("L"),afterPercentageTarget:parseFloat(this.afterPercentageTarget).toFixed(2),selectedDurationType:this.selectedDurationType,stock:this.stock,target:this.target,userId:this.userId,userName:this.userName,challenge:this.challenge}}}]),e}(),ee={toFirestore:function(e){return(0,n.Z)((0,n.Z)({},e),{},{target:Number(e.target),afterPercentageTarget:Number(e.afterPercentageTarget),percentage:Number(e.percentage),predictionDateTime:new Date(e.predictionDateTime)})},fromFirestore:function(e,t){var r=e.data(t);return new K(r)}},te=function(e){return(0,I.IO)((0,I.hJ)(V.db,ae).withConverter(ee),(0,I.ar)("userId","==",e),(0,I.ar)("predictionDateTime",">=",new Date(Date.now()+1e3),(0,I.Xo)("predictionDateTime","desc")))},re=function(e){return(0,I.IO)((0,I.hJ)(V.db,ae).withConverter(ee),(0,I.ar)("userId","==",e),(0,I.ar)("predictionDateTime",">=",new Date(Date.now()+1e3)),(0,I.ar)("isSharePublicaly","==",!0),(0,I.Xo)("predictionDateTime","desc"))},ne=function(e){return(0,I.IO)((0,I.hJ)(V.db,ae).withConverter(ee),(0,I.ar)("userId","==",e),(0,I.ar)("predictionDateTime","<",new Date(Date.now()+1e3)))},ae="public_predictions",ie=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.PL)(te(t));case 3:return r=e.sent,n=[],r.forEach((function(e){return n.push(e.data().getFormattedData())})),e.abrupt("return",{success:!0,data:n});case 9:return e.prev=9,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",{success:!1,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.ET)((0,I.hJ)(V.db,ae).withConverter(ee),t);case 3:return r=e.sent,e.next=6,(0,I.r7)(r,{id:r.id});case 6:if(console.log("Prediction created ==> ",r.id),!r.id){e.next=9;break}return e.abrupt("return",{success:!0,message:"Prediction added!"});case 9:return e.abrupt("return",{success:!1,message:"Prediction failed to saved"});case 12:return e.prev=12,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",{success:!1,message:"Something went wrong!"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.PL)(re(t));case 3:return r=e.sent,n=[],r.forEach((function(e){return n.push(e.data().getFormattedData())})),e.abrupt("return",{success:!0,data:n});case 9:return e.prev=9,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",{success:!1,data:[]});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.PL)(ne(t));case 3:return r=e.sent,n=[],r.forEach((function(e){return n.push(e.data().getFormattedData())})),e.abrupt("return",{success:!0,data:n});case 9:return e.prev=9,e.t0=e.catch(0),console.log("Error while fetching completed predictins",e.t0),e.abrupt("return",{success:!1,message:"Reuest failed to for complete preidiction data"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();function le(e){var t=e.userID,r=e.isChallengesList,n=e.onChallengeClick,c=(0,o.useState)([]),l=(0,s.Z)(c,2),u=l[0],d=l[1],p=(0,o.useState)(!1),x=(0,s.Z)(p,2),g=x[0],f=x[1],h=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,ie(t);case 3:r=e.sent,d(r.data),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,oe(t);case 3:r=e.sent,d(r.data),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e;return r?(m(),e=(0,I.cf)(re(t),(function(e){var t=[];e.forEach((function(e){return t.push(e.data().getFormattedData())})),d(t)}))):(h(),e=(0,I.cf)(te(t),(function(e){var t=[];e.forEach((function(e){return t.push(e.data().getFormattedData())})),d(t)}))),function(){e&&e()}}),[]),g?(0,P.jsx)(q,{}):(0,P.jsx)(ue,{children:(0,P.jsxs)(de,{children:[u.map((function(e){return(0,P.jsx)(U,{onChallengeClick:n,prediction:e,isChallengeCard:r},e.id)})),!g&&0===u.length&&(0,P.jsx)(B,{message:"No ongoing prediction found"})]})})}le.defaultProps={isChallengesList:!1,onChallengeClick:function(){}};var ue=(0,u.Z)("div")({padding:"5px",width:"100%"}),de=(0,u.Z)("div")({alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"nowrap",overflowX:"auto",overflowY:"hidden",gridGap:"18px","::-webkit-scrollbar":{height:"10px",margin:"5px"},"::-webkit-scrollbar-track":{boxShadow:"inset 0 0 1px rgba(0, 0, 0, 0.3)"},"::-webkit-scrollbar-thumb":{background:"#464d58",borderRadius:"10px"}}),pe=r(5987),xe=r(4942),ge=r(5289),fe=r(9157),he=r(7636),me=r(1652),ve=r(8106),Ze=r(5661),be=r(5699),je=r(5931),ke=r(1026),ye=r(1440),we=r(2199);function Ce(e){var t=e.handleChange,r=e.value,n=e.tabs,a=e.sx,i=(0,o.useState)(null),c=(0,s.Z)(i,2),l=c[0],u=c[1];return(0,o.useEffect)((function(){u(r)}),[r]),(0,P.jsx)(Te,{sx:a,color:"primary",size:"small","aria-label":"small button group",children:n.map((function(e){return(0,P.jsx)(F.Z,{color:"secondary",variant:"outlined",onClick:function(){return function(e){u(e),t(e)}(e.value)},className:l===e.value?"selected":"",children:e.label},e.value)}))})}var Te=(0,u.Z)(we.Z)({backgroundColor:"#fff",borderColor:"black",button:{color:"black",border:"1px solid #857b7b !important",padding:"3px 20px",fontWeight:"bold",textTransform:"capitalize"},"button.selected":{backgroundColor:"rgb(0 255 0)"}});Ce.defaultProps={tabs:[],sx:{}};var Pe=Ce,De="cfl07hhr01qj7ds2rp70cfl07hhr01qj7ds2rp7g",Ne="https://finnhub.io/api/v1",Se=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trim()){e.next=2;break}return e.abrupt("return",[]);case 2:return r="".concat(Ne,"/search?q=").concat(t,"&token=").concat(De),e.next=5,fetch(r);case 5:return n=e.sent,e.next=8,n.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{});case 2:return r="".concat(Ne,"/quote?symbol=").concat(t.symbol,"&token=").concat(De),e.next=5,fetch(r);case 5:return n=e.sent,e.next=8,n.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=r(8719),Le=["size"],We=o.forwardRef((function(e,t){return(0,P.jsx)(je.Z,(0,n.Z)({direction:"down",ref:t},e))})),Ae={stock:{price:null},isSharePublicaly:!0,selectedDurationType:"week",target:"",percentage:"10",predictionDateTime:"",afterPercentageTarget:""},Ee={day:5,week:10,month:15};var Re=(0,u.Z)(Ze.Z)({padding:"10px",fontWeight:"bold",fontSize:"28px",color:"#ffcd29",textAlign:"center",backgroundColor:"#273c58",marginTop:"20px"}),Me=(0,u.Z)(ye.Z)((function(){return{"& .MuiSwitch-switchBase.Mui-checked":{color:"#fff"},"& .MuiSwitch-switchBase.Mui-checked + .MuiSwitch-track":{backgroundColor:"rgb(34 255 34)"}}})),Fe=function(e){var t,r,c,u,x,g,f=e.open,h=e.onClose,m=(0,o.useState)([]),v=(0,s.Z)(m,2),Z=v[0],w=v[1],C=(0,o.useState)(!1),T=(0,s.Z)(C,2),D=T[0],N=T[1],S=(0,o.useState)(!1),I=(0,s.Z)(S,2),z=I[0],L=I[1],W=(0,o.useState)(Ae),A=(0,s.Z)(W,2),E=A[0],R=A[1],M=(0,ze.D)(),F=M.showError,$=M.showSuccessMsg,G=(0,o.useContext)(p.Vo).userData,U=G.name,H=G.uid,Y=function(){h(),R(Ae)},J=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===t||void 0===t||null===(r=t.trim())||void 0===r?void 0:r.length)>=2)){e.next=7;break}return N(!0),e.next=4,Se(t);case 4:n=e.sent,w((null===n||void 0===n?void 0:n.result)||[]),N(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:r=e.sent,R((0,n.Z)((0,n.Z)({},E),{},{stock:(0,n.Z)((0,n.Z)({},E.stock),{},{price:r})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=(0,o.useCallback)(function(e){var t;return function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=this;t&&clearTimeout(t),t=setTimeout((function(){t=null,e.apply(i,n)}),500)}}(J),[]),B=function(e,t){R((0,n.Z)((0,n.Z)({},E),{},(0,xe.Z)({},e,t)))},V=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,i,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("payload",E),!((t=k(E)).length>0)){e.next=7;break}console.log("erros",t),t.forEach((function(e){F(e)})),e.next=16;break;case 7:return L(!0),r=y((0,n.Z)((0,n.Z)({},E),{},{userName:U,userId:H})),e.next=11,se(r);case 11:i=e.sent,s=i.success,o=i.message,s?($(o),Y()):F(o),L(!1);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e;null!==E&&void 0!==E&&null!==(e=E.stock)&&void 0!==e&&e.symbol&&_(E.stock)}),[null===E||void 0===E||null===(t=E.stock)||void 0===t?void 0:t.symbol]),(0,o.useEffect)((function(){var e,t,r=b({stockPrice:null===E||void 0===E||null===(e=E.stock)||void 0===e||null===(t=e.price)||void 0===t?void 0:t.c,percentage:E.percentage,target:E.target}),a=r.afterPercentageTarget,i=r.percentage;R((0,n.Z)((0,n.Z)({},E),{},{afterPercentageTarget:a,percentage:i}))}),[null===E||void 0===E?void 0:E.target]),(0,P.jsxs)(ge.Z,{open:f,TransitionComponent:We,maxWidth:"sm",fullWidth:!0,sx:{".MuiDialog-scrollPaper":{justifyContent:"center",alignItems:"flex-start"},".MuiPaper-root":{minHeight:"50%"}},onClose:Y,"aria-describedby":"alert-dialog-slide-description",children:[(0,P.jsx)(Re,{children:"Create A Prediction"}),(0,P.jsxs)(fe.Z,{sx:{textAlign:"center",marginTop:"25px",paddingTop:"15px !important"},children:[(0,P.jsx)(be.Z,{placeholder:"Search by stock symbol e.g. AAPL",loading:D,size:"small",sx:{margin:"0 auto",width:"80%"},onInputChange:function(e){var t=e.target;return q(t.value)},options:Z,onChange:function(e,t){var r;R((r=t)?(0,n.Z)((0,n.Z)({},E),{},{stock:(0,n.Z)((0,n.Z)({},E.stock),r)}):Ae)},getOptionLabel:function(e){return"".concat(e.description," (").concat(e.symbol,")")},renderInput:function(e){return(0,P.jsx)(ke.Z,(0,n.Z)((0,n.Z)({},e),{},{label:"Search by stock symbol e.g. AAPL",placeholder:"Search Stock"}))}}),!(null!==E&&void 0!==E&&null!==(r=E.stock)&&void 0!==r&&r.price)&&(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)("span",{children:"\u24d8 Please search & select a stock for prediction."})}),(null===E||void 0===E||null===(c=E.stock)||void 0===c?void 0:c.price)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(Pe,{sx:{marginTop:"18px"},handleChange:function(e){return function(e,t){var r,a=Ee[t],i=b({stockPrice:E.stock.price.c,percentage:a,target:E.target}).afterPercentageTarget;R((0,n.Z)((0,n.Z)({},E),{},(r={},(0,xe.Z)(r,e,t),(0,xe.Z)(r,"percentage",a),(0,xe.Z)(r,"afterPercentageTarget",i),r)))}("selectedDurationType",e)},value:E.selectedDurationType,tabs:[{label:"Daily",value:"day"},{label:"Weekly",value:"week"},{label:"Monthly",value:"month"}]}),(0,P.jsx)(d.Z,{sx:{marginTop:"18px"},children:(0,P.jsxs)("strong",{children:[null===E||void 0===E||null===(u=E.stock)||void 0===u?void 0:u.symbol," @ $",null===E||void 0===E||null===(x=E.stock)||void 0===x||null===(g=x.price)||void 0===g?void 0:g.c," will reach a target of"]})}),(0,P.jsxs)(l.Z,{sx:{width:"70%",display:"flex",justifyContent:"space-between",alignItems:"center",margin:"18px auto"},children:[(0,P.jsx)(ke.Z,{sx:{maxWidth:"180px"},size:"small",id:"outlined-basic",label:"Target price",variant:"outlined",name:"target",type:"number",onChange:function(e){var t=e.target;return B(t.name,t.value)},value:null===E||void 0===E?void 0:E.target}),(0,P.jsx)(d.Z,{sx:{margin:"0 2rem"},children:"By"}),(0,P.jsx)(me._,{dateAdapter:ve.Q,children:(0,P.jsx)(he.$,{inputFormat:"MM/DD/YYYY",value:null===E||void 0===E?void 0:E.predictionDateTime,disablePast:!0,size:"sm",sx:{".MuiInputBase-root":{height:"40px",width:"180px",input:{letterSpacing:"normal"}}},onChange:function(e){return B("predictionDateTime",e)},renderInput:function(e){e.size;var t=(0,pe.Z)(e,Le);return(0,P.jsx)(ke.Z,(0,n.Z)((0,n.Z)({},t),{},{size:"small"}))}})})]}),(0,P.jsx)(d.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)("strong",{children:"It has a stop-loss at"})}),(0,P.jsxs)(l.Z,{sx:{width:"70%",display:"flex",justifyContent:"space-evenly",alignItems:"center",margin:"18px auto"},children:[(0,P.jsx)(ke.Z,{sx:{maxWidth:"120px"},size:"small",id:"outlined-basic",label:"Stop loss %",name:"percentage",type:"number",onChange:function(e){var t=e.target;return function(e,t){if(t){var r=b({stockPrice:E.stock.price.c,target:E.target,percentage:t}),a=r.afterPercentageTarget,i=r.percentage;R((0,n.Z)((0,n.Z)({},E),{},{afterPercentageTarget:a,percentage:i}))}else{var s;R((0,n.Z)((0,n.Z)({},E),{},(s={},(0,xe.Z)(s,e,t),(0,xe.Z)(s,"afterPercentageTarget",""),s)))}}(t.name,t.value)},value:E.percentage,variant:"outlined"}),(0,P.jsx)(ke.Z,{sx:{maxWidth:"120px"},size:"small",id:"outlined-basic",name:"afterPercentageTarget",onChange:function(e){var t=e.target;return function(e,t){if(t&&Number(t)>0){var r=j({stockPrice:E.stock.price.c,targetPrice:t});R((0,n.Z)((0,n.Z)({},E),{},{afterPercentageTarget:t,percentage:r}))}else R((0,n.Z)((0,n.Z)({},E),{},{afterPercentageTarget:t,percentage:""}))}(t.name,t.value)},value:null===E||void 0===E?void 0:E.afterPercentageTarget,label:"Stop loss $",type:"number",variant:"outlined"})]}),(0,P.jsx)(l.Z,{sx:{marginTop:"24px"},children:(0,P.jsx)(O,{onClick:V,disabled:z,children:z?"Submitting...":"Predict now"})}),(0,P.jsxs)(l.Z,{sx:{fontWeight:500,padding:"10px",textAlign:"right",fontSize:"14px"},children:["Allowed for public challenge",(0,P.jsx)(Me,{name:"isSharePublicaly",checked:E.isSharePublicaly,onChange:function(e){var t=e.target;return B(t.name,t.checked)}})]})]})]})]})},Oe=r(4721),$e=r(5643),Ge=r(7);var Ue=(0,u.Z)(l.Z)({padding:"10px",display:"flex",alignItems:"center",justifyContent:"flex-start",fontWeight:500,".card-content":{display:"block",lineHeight:1,marginLeft:"15px"}}),He=function(e){var t=e.userID,r=(0,o.useState)([]),n=(0,s.Z)(r,2),c=n[0],u=n[1],p=(0,o.useState)(!1),x=(0,s.Z)(p,2),f=x[0],h=x[1],m=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,ce(t);case 3:(r=e.sent).success&&u(r.data),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){m()}),[t]),f?(0,P.jsx)(q,{}):(0,P.jsxs)(l.Z,{children:[c.map((function(e){var t=e.stock,r=e.target,n=e.id;return(0,P.jsxs)(o.Fragment,{children:[(0,P.jsxs)(Ue,{children:[(0,P.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"30%",".danger":{color:$e.Z[400]},".green":{color:Ge.Z[400]}},children:[(0,P.jsx)(l.Z,{children:(0,P.jsx)(g.Z,{sx:{bgcolor:$e.Z[400]},alt:t.symbol,variant:"rounded",src:"broken-iamge.jpeg"})}),(0,P.jsxs)(l.Z,{className:"card-content",children:[(0,P.jsxs)(d.Z,{children:[t.description," (",t.symbol,")"]}),(0,P.jsxs)(d.Z,{variant:"small",children:["buy from $",t.price.c," to $",r]})]})]}),(0,P.jsx)(d.Z,{variant:"h6",className:"danger",children:"50%"})]}),(0,P.jsx)(Oe.Z,{sx:{width:"35%"}})]},n)})),!f&&0===c.length&&(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(B,{message:"No completed predictions found!"})})]})},Ye=r(4395),Je=r(4663),_e=r(3400),qe=r(9823),Be=r(2460),Ve=o.forwardRef((function(e,t){return(0,P.jsx)(je.Z,(0,n.Z)({direction:"up",ref:t},e))}));function Xe(e){var t,r,n,c,u=e.open,x=e.onClose,f=e.prediction,h=void 0===f?{}:f,m=(0,o.useState)(""),Z=(0,s.Z)(m,2),b=Z[0],j=Z[1],k=(0,o.useState)(!1),y=(0,s.Z)(k,2),C=y[0],D=y[1],N=(0,ze.D)(),S=N.showError,I=N.showSuccessMsg,z=o.useContext(p.Vo).userData,L=function(){j(""),x()},W=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,n,i,s,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Number(null===h||void 0===h?void 0:h.stock.price.c),r=(null===h||void 0===h?void 0:h.target)>t,n=Number(b),!(r&&n>t)){e.next=7;break}S("Invalid prediction, Target Price should be Less than $".concat(t)),e.next=20;break;case 7:if(r||!(n<t)){e.next=11;break}S("Invalid prediction, Target Price should be Greter than $".concat(t)),e.next=20;break;case 11:return D(!0),i=w(h,z,b),e.next=15,se(i);case 15:s=e.sent,o=s.success,c=s.message,o?(I("Challenge prediction saved."),L()):console.log("ErrorMessage",c),D(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=T(null===h||void 0===h||null===(t=h.stock)||void 0===t||null===(r=t.price)||void 0===r?void 0:r.c,null===h||void 0===h?void 0:h.target);return(0,P.jsx)("div",{children:(0,P.jsx)(ge.Z,{open:u,TransitionComponent:Ve,keepMounted:!0,onClose:L,"aria-describedby":"alert-dialog-slide-description",sx:{".MuiDialog-scrollPaper":{justifyContent:"center",alignItems:"flex-start",zIndex:2},".MuiPaper-root":{minHeight:"50%",width:"450px"},".MuiDialogContent-root":{padding:"0"}},children:(0,P.jsxs)(fe.Z,{children:[(0,P.jsx)(Qe,{children:(0,P.jsxs)(l.Z,{sx:{textAlign:"center"},children:[(0,P.jsx)(l.Z,{sx:{position:"absolute",left:"70px"},children:(0,P.jsx)(g.Z,{src:"borken-image.jpeg",alt:(null===h||void 0===h?void 0:h.userName)||"N/A",sx:{height:"70px",width:"70px"}})}),(0,P.jsx)(d.Z,{sx:{color:"yellow",fontSize:"22px",fontWeight:600,marginTop:"2rem"},children:(null===h||void 0===h?void 0:h.userName)||"Predictany007"}),(0,P.jsx)(d.Z,{sx:{letterSpacing:7,color:"#fff",fontWeight:600,marginTop:"12px"},children:"Predicts"}),(0,P.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,P.jsx)(d.Z,{sx:{color:"buy"===A?Ge.Z[400]:Be.Z[400],fontSize:"36px",textShadow:"0 -1px 8px ".concat("buy"===A?Ge.Z[300]:Be.Z[300]),textTransform:"uppercase"},children:(0,P.jsx)("b",{className:A,children:A})}),(0,P.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,P.jsx)(g.Z,{variant:"rounded",src:"broken-image.jpeg",alt:"TSLA",sx:{width:"35px",height:"35px",bgcolor:$e.Z[400],marginLeft:"10px"}}),(0,P.jsxs)(d.Z,{color:"#fff",sx:{display:"grid",lineHeight:1,marginLeft:"10px",small:{fontSize:"10px"}},children:[(0,P.jsx)(d.Z,{variant:"subtitle1",children:null===h||void 0===h||null===(n=h.stock)||void 0===n?void 0:n.symbol}),(0,P.jsx)("small",{children:null===h||void 0===h||null===(c=h.stock)||void 0===c?void 0:c.description})]})]})]}),(0,P.jsxs)(d.Z,{sx:{color:"rgb(218 218 218)",fontSize:"14px"},children:["Predicted: ",v()(null===h||void 0===h?void 0:h.predictionDateTime).format("LL")]}),(0,P.jsxs)(et,{children:[(0,P.jsx)("span",{children:"Target Price: "}),(0,P.jsxs)("span",{children:["$ ",null===h||void 0===h?void 0:h.target]})]}),(0,P.jsxs)(et,{children:[(0,P.jsx)("span",{children:"Target Date: "}),(0,P.jsx)("span",{children:null===h||void 0===h?void 0:h.predictionDateTime})]})]})}),(0,P.jsxs)(Ke,{children:[(0,P.jsx)(d.Z,{variant:"subtitle2",children:"To challenge, you must predict the opposite of the above user`s prediction"}),(0,P.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,P.jsx)(d.Z,{variant:"subtitle1",children:(0,P.jsx)("strong",{children:"Tesla will reach a target of:"})}),(0,P.jsx)(ke.Z,{sx:{maxWidth:"120px",marginLeft:"18px"},placeholder:"Price $",name:"targetPrice",size:"small",type:"number",value:b,onChange:function(e){var t=e.target;return j(t.value)}})]}),(0,P.jsx)(l.Z,{sx:{textAlign:"center",marginTop:"18px"},children:(0,P.jsx)(O,{disabled:C,onClick:W,children:C?"Submitting...":"Issue challenge"})})]})]})})})}var Qe=(0,u.Z)(l.Z)({padding:"1rem",position:"relative",background:"radial-gradient(circle, rgba(65,70,65,1) 1%, rgba(0,0,0,0.9780505952380952) 53%)"}),Ke=(0,u.Z)(l.Z)({backgroundColor:"#f6fafc",padding:"1rem",textAlign:"center",background:"linear-gradient(50deg, rgba(206,230,243,1) 0%,rgba(255,255,255,1) 41%, rgba(206,230,243,1) 68%)"}),et=(0,u.Z)(l.Z)({color:"#fff",fontSize:"14px",fontWeight:500,display:"flex",justifyContent:"space-between",width:"170px",margin:"0 auto",lineHeight:2});Xe.defaultProps={prediction:null};var tt=o.forwardRef((function(e,t){return(0,P.jsx)(je.Z,(0,n.Z)({direction:"up",ref:t},e))}));function rt(e){var t=e.open,r=e.onClose,n=e.userID,a=e.userName,i=(0,o.useState)({open:!1,prediction:null}),c=(0,s.Z)(i,2),u=c[0],p=c[1];console.log("userUID",n);var x=function(){r()};return(0,P.jsx)("div",{children:(0,P.jsxs)(ge.Z,{fullScreen:!0,open:t,onClose:x,TransitionComponent:tt,children:[(0,P.jsx)(Ye.Z,{sx:{position:"relative"},color:"default",children:(0,P.jsxs)(Je.Z,{children:[(0,P.jsx)(_e.Z,{edge:"start",color:"inherit",onClick:x,"aria-label":"close",children:(0,P.jsx)(qe.Z,{})}),(0,P.jsxs)(d.Z,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:[a,"`s Predictions"]})]})}),(0,P.jsxs)(l.Z,{sx:{padding:"10px"},children:[(0,P.jsx)(d.Z,{variant:"subtitle2",sx:{marginTop:"18px",fontWeight:600},children:"ONGOING PREDICTION"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(le,{userID:n,isChallengesList:!0,onChallengeClick:function(e){p({open:!0,prediction:e})}})}),(0,P.jsx)(d.Z,{variant:"subtitle2",sx:{marginTop:"18px",fontWeight:600},children:"COMPLETED PREDICTIONS"}),(0,P.jsx)(He,{userID:n})]}),(0,P.jsx)(Xe,{open:u.open,prediction:u.prediction,onClose:function(){p({open:!1,prediction:null})}})]})})}var nt=(0,u.Z)("div")({display:"flex",alignItems:"flex-end",justifyContent:"space-between",width:"100%",margin:"20px 0",".heading-text":{fontWeight:"bold",fontSize:"28px"}}),at=function(){var e=(0,o.useContext)(p.Vo).userData,t=e.uid,r=e.name,u=(0,o.useState)([]),g=(0,s.Z)(u,2),f=g[0],h=g[1],m=(0,o.useState)(!1),v=(0,s.Z)(m,2),Z=v[0],b=v[1],j=(0,o.useState)({open:!1,userID:"",userName:""}),k=(0,s.Z)(j,2),y=k[0],w=k[1],C=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("calling APIs"),e.next=3,(0,x.Cv)(t);case 3:r=e.sent,h(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){return b(!Z)};return(0,o.useEffect)((function(){C()}),[]),(0,P.jsxs)(c.Z,{maxWidth:"xl",children:[(0,P.jsxs)(nt,{children:[(0,P.jsxs)(d.Z,{className:"heading-text",children:["Hello, ",r]}),(0,P.jsx)(l.Z,{children:(0,P.jsx)($,{onClick:T,children:"Predict Now"})})]}),(0,P.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600,paddingTop:"18px"},children:"OTHER USERS"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(S,{users:f,onSelectUser:function(e){w({open:!0,userID:e.id,userName:e.name})}})}),(0,P.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600,paddingTop:"18px"},children:"YOUR ONGOING PREDICTION"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(le,{userID:t})}),(0,P.jsx)(d.Z,{variant:"body2",sx:{fontWeight:600,paddingTop:"18px"},children:"YOUR COMPLETED PREDICTIONS"}),(0,P.jsx)(l.Z,{sx:{marginTop:"18px"},children:(0,P.jsx)(He,{userID:t})}),(0,P.jsx)(Fe,{open:Z,onClose:T}),(0,P.jsx)(rt,(0,n.Z)({onClose:function(){return w({open:!1,userID:"",userName:""})}},y))]})},it=at},2570:function(e,t,r){r.d(t,{Cv:function(){return c},jd:function(){return l}});var n=r(4165),a=r(5861),i=r(7799),s=r(295),o="Users",c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,i.IO)((0,i.hJ)(s.db,o),(0,i.ar)("id","!=",t)),e.next=4,(0,i.PL)(r);case 4:return a=e.sent,c=[],a.forEach((function(e){return c.push(e.data())})),e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),console.log("err",e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,i.JU)(s.db,o,t),e.next=4,(0,i.QT)(r);case 4:return a=e.sent,e.abrupt("return",{success:!0,data:a.data()});case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{success:!1,message:"No user found!"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=203.135f1dea.chunk.js.map